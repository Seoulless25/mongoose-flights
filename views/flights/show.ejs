<%- include('../partials/header') %>

<section id="show-page">
  <div>Airline</div>
  <div><%= flight.airline %></div>
  <div>Airport</div>
  <div><%= flight.airport %></div>
  <div>Flight Number</div>
  <div><%= flight.flightNo %></div>
  <div>Departure Date</div>
  <div><%= flight.depart %></div>
</section>

<div>Seat</div>
<% if (flight.seat) { %>
  <ul>
    <% flight.seat.map(p => `<li>${p.name} <small>${p.flight.toLocaleDateString()}</small></li>`).join('') %>
    </ul>
  <% } %>

<br /><br />
<h2>Destinations</h2>
<form
  id="add-review-form"
  method="POST"
  action="/flights/<%= flight._id %>/destinations"
>
  <label
    >Airport
    <select name="airport">
      <option hidden="true"></option>
      <option value="AUS">AUS</option>
      <option value="DFW">DFW</option>
      <option value="DEN">DEN</option>
      <option value="LAX">LAX</option>
      <option value="SAN">SAN</option>
      <option value="ATL">ATL</option>
    </select>
  </label>
  <label>Arrival (Date): <input type="date" name="arrival" /></label><br />
  <input type="submit" value="Add Destination" />
</form>

<% if (flight.destinations.length) { %>
<table>
  <thead>
    <tr>
      <th>Airport</th>
      <th>Arrival</th>
    </tr>
  </thead>
  <tbody>
    <% flight.destinations.forEach(function(d) { %>
    <tr>
      <td><%= d.airport %></td>
      <td><%= d.arrival.toLocaleDateString() %></td>
    </tr>
    <% }); %>
  </tbody>
</table>
<% } else { %>
<h5>No Destinations Yet</h5>

<% } %> <%- include('../partials/footer') %>