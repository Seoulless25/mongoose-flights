<%- include('../partials/header') %>

<section id="show-page"><br>
  <div>Airline:</div>
  <div><%= flight.airline %></div>
  <div>Airport:</div>
  <div><%= flight.airport %></div>
  <div>Flight Number:</div>
  <div><%= flight.flightNo %></div>
  <div>Departure Date:</div>
  <div><%= flight.departs %></div>
</section>

<br /><br />
<h2>Destinations</h2>
<form
  id="add-review-form"
  method="POST"
  action="/flights/<%= flight._id %>/destinations"
>
  <label
    >Airport
    <select name="airport">
      <option hidden="true"></option>
      <option value="AUS">AUS</option>
      <option value="DFW">DFW</option>
      <option value="DEN">DEN</option>
      <option value="LAX">LAX</option>
      <option value="SAN">SAN</option>
      <option value="ATL">ATL</option>
    </select>
  </label>
  <label>Arrival (Date): <input type="date" name="arrival" /></label><br />
  <input type="submit" value="Add Destination" />
</form>

<% if (flight.destinations.length) { %>
<table>
  <thead>
    <tr>
      <th>Airport</th>
      <th>Arrival</th>
    </tr>
  </thead>
  <tbody>
    <% flight.destinations.forEach(function(d) { %>
    <tr>
      <td><%= d.airport %></td>
      <td><%= d.arrival.toLocaleDateString() %></td>
    </tr>
    <% }); %>
  </tbody>
</table>
<% } else { %>
<h5>No destinations Yet</h5>

<%if(ticket.length){%>
  <h2>Tickets</h2>
<table>
  <thead>
    <tr>
      <th>Seat No:</th>
      <th>Price:</th>
    </tr>
  </thead>
  <tbody>
   <% ticket.forEach((t) => { console.log(t)%>
   <tr>
    <td><%= t.seat %></td>
    <td><%= t.price %></td>
   </tr>
  <%});%>
    </tbody>
</table><br><br>
<%}%>

<a class="ticket-submit-btn" href="/flights/<%= flight._id %>/tickets/new">New Ticket</a>  


<% } %> <%- include('../partials/footer') %>